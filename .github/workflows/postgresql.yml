name: Django Postgre CI

on:
  push:
    branches: [ "db_postgresql" ]

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: Create Django Project
      run: docker-compose run web django-admin startproject composeexample .
    - name: Cambiar propietario y permisos
      run: |
        sudo chown -R runner:runner ./composeexample/
        chmod -R 755 ./composeexample/
    - name: Replace settings for the test
      run: cp -f ./setting_ci/settings.py ./composeexample/
    - name: container up
      run: docker-compose up -d
